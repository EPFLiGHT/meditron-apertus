# --- PATHS ---
PROJECT_ROOT=/users/<user>/meditron-apertus
STORAGE_ROOT=/capstor/store/cscs/swissai/a127
ENV=/users/<user>/.edf/apertus.toml
USER_STORAGE=$STORAGE_ROOT/homes/<user>

# --- SECRETS ---
WANDB_API_KEY=<wandb_token>
HF_TOKEN=<hf_token>
SLACK_WEBHOOK_URL=<slack_webhook_url>

# --- CONFIGS ---
WANDB_PROJECT=<wandb-project>
WANDB_ENTITY=<wandb-entity>

# =============================================================================
# NODE-LOCAL CACHES (avoid NFS / shared filesystem)
# Prefer SLURM_TMPDIR (node-local), fallback to /tmp.
# Namespacing by job id avoids collisions when multiple jobs run on same node.
# =============================================================================
JOB_LOCAL_ROOT="/iopsstor/scratch/cscs/theimer"
CACHE_ROOT="$JOB_LOCAL_ROOT/axolotl-cache/${SLURM_JOB_ID:-nojob}"

export CACHE_ROOT

# XDG base
export XDG_CACHE_HOME="$CACHE_ROOT/cache"
export TMPDIR="$CACHE_ROOT/tmp"

# Hugging Face / Datasets
export HF_HOME="$CACHE_ROOT/hf"
export HUGGINGFACE_HUB_CACHE="$HF_HOME/hub"
export HF_DATASETS_CACHE="$HF_HOME/datasets"
# TRANSFORMERS_CACHE is deprecated but some stacks still read it; keep aligned.
export TRANSFORMERS_CACHE="$HUGGINGFACE_HUB_CACHE"

# PyTorch / Triton
export TORCH_HOME="$CACHE_ROOT/torch"
export TORCH_EXTENSIONS_DIR="$XDG_CACHE_HOME/torch_extensions"
export TRITON_CACHE_DIR="$XDG_CACHE_HOME/triton"

# Weights & Biases
export WANDB_DIR="$CACHE_ROOT/wandb"
export WANDB_CACHE_DIR="$XDG_CACHE_HOME/wandb"

# pip / uv
export PIP_CACHE_DIR="$XDG_CACHE_HOME/pip"
export UV_CACHE_DIR="$XDG_CACHE_HOME/uv"

# Matplotlib
export MPLCONFIGDIR="$XDG_CACHE_HOME/matplotlib"
